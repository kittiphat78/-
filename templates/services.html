{% extends "base.html" %}
{% block title %}บริการ - Car Wash{% endblock %}

{% block content %}
<div class="container">
  <h2 class="text-center mt-4 mb-5 text-primary fw-bold display-5">
    <i class="bi bi-droplet-half me-2"></i> แพ็กเกจล้างรถสุดพรีเมี่ยม
  </h2>

  <style>
    /* New Car Wash Theme Colors */
    :root {
      --wash-primary: #007bff; /* Blue for Water/Clean */
      --wash-secondary: #28a745; /* Green for Speed/Quality */
      --wash-bg-light: #f7f9fc;
    }

    /* Basic Styling */
    body { background-color: var(--wash-bg-light); }
    
    .service-card {
      position: relative;
      overflow: hidden;
      border-radius: 1rem;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      height: 100%;
      background: #fff;
      border: 1px solid rgba(0, 123, 255, 0.1);
    }

    .service-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 1rem 2.5rem rgba(0, 123, 255, 0.25);
    }

    .service-image-wrapper {
      position: relative;
      overflow: hidden;
      height: 220px;
      border-top-left-radius: 1rem;
      border-top-right-radius: 1rem;
    }

    .service-card img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.6s ease;
    }

    .service-card:hover img {
      transform: scale(1.1);
    }

    .service-card-body {
      padding: 1.5rem;
      text-align: center;
    }

    .service-title {
      color: var(--wash-primary);
      font-weight: 800;
      font-size: 1.5rem;
      margin-bottom: 0.5rem;
    }

    .service-description {
      color: #555;
      font-size: 0.95rem;
      margin-bottom: 1rem;
      min-height: 50px; /* เพิ่มความสูงขั้นต่ำให้กล่องไม่เลื่อน */
    }

    .service-price {
      color: var(--wash-secondary);
      font-weight: 900;
      font-size: 2rem; /* ทำให้ราคาดูโดดเด่น */
      margin-bottom: 1.25rem;
      letter-spacing: -1px;
    }
    .service-price sup {
      font-size: 0.75rem;
      font-weight: 600;
      color: #999;
    }

    .service-card .btn {
      background: linear-gradient(45deg, var(--wash-primary), #0056b3);
      border: none;
      color: white;
      padding: 0.75rem 2rem;
      font-size: 1rem;
      font-weight: 700;
      border-radius: 0.5rem;
      transition: all 0.3s ease;
      box-shadow: 0 6px 18px rgba(0, 123, 255, 0.3);
    }

    .service-card .btn:hover {
      background: linear-gradient(45deg, #0056b3, #003d7e);
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(0, 123, 255, 0.4);
    }

    .empty-state {
      padding: 4rem 2rem;
      text-align: center;
      color: #999;
      background: #fff;
      border-radius: 1rem;
      box-shadow: 0 4px 15px rgba(0,0,0,0.05);
    }

    .empty-state i {
      font-size: 4rem;
      margin-bottom: 1rem;
      opacity: 0.5;
    }
  </style>

  <div class="row justify-content-center">
    {% for s in services %}
    {% set s_name = (s.name or '')|lower %}
    {% set service_description = "การทำความสะอาดพื้นฐานและดูดฝุ่นภายในอย่างรวดเร็ว เหมาะสำหรับรถใช้งานประจำวัน" %}
    {% set service_image = 'images/car0.jpg' %}
    {% set price_display = s.price or 199 %}

    {% if 'ล้างพรีเมี่ยม' in s.name or 'premium' in s_name %}
      {% set service_description = "แพ็กเกจยอดนิยม! ล้างละเอียด ลงแวกซ์น้ำ และทำความสะอาดคอนโซลภายใน เพื่อความเงางามที่ยาวนาน" %}
      {% set service_image = 'images/car1.jpg' %}
      {% set price_display = s.price or 399 %}
    {% elif 'เคลือบสี' in s.name or 'coat' in s_name %}
      {% set service_description = "บริการเคลือบสีและฟิล์มป้องกันระดับนาโน ช่วยปกป้องสีรถจากรอยขีดข่วนและสิ่งสกปรก ให้รถเงาฉ่ำเหมือนใหม่" %}
      {% set service_image = 'images/car2.jpg' %}
      {% set price_display = s.price or 699 %}
    {% elif 'ห้องเครื่อง' in s.name %}
      {% set service_description = "ล้างทำความสะอาดห้องเครื่องยนต์อย่างพิถีพิถัน ปลอดภัย ไม่ทำลายอุปกรณ์ไฟฟ้า" %}
      {% set service_image = 'images/car0.jpg' %}
      {% set price_display = s.price or 299 %}
    {% elif 'ช่วงล่าง' in s.name %}
      {% set service_description = "ล้างขจัดคราบโคลนและสิ่งสกปรกใต้ท้องรถ เพิ่มความปลอดภัยและยืดอายุการใช้งาน" %}
      {% set service_image = 'images/car1.jpg' %}
      {% set price_display = s.price or 259 %}
    {% elif 'กระจก' in s.name %}
      {% set service_description = "ขัดและเคลือบกระจกทุกบาน เพิ่มความใส ลดคราบน้ำ เกาะแน่น ทัศนวิสัยดีขึ้น" %}
      {% set service_image = 'images/car2.jpg' %}
      {% set price_display = s.price or 189 %}
    {% endif %}

    <div class="col-sm-6 col-lg-4 mb-4">
      <div class="service-card shadow-lg">
        <div class="service-image-wrapper">
          <img src="{{ url_for('static', filename=service_image) }}" 
               alt="รูปภาพบริการ {{ s.name }}" 
               loading="lazy">
        </div>

        <div class="service-card-body">
          <h5 class="service-title">{{ s.name }}</h5>
          <p class="service-description">{{ service_description }}</p>
          <div class="service-price">
            <sup>เริ่มต้นเพียง</sup> ฿{{ price_display }}
          </div>
          <a href="{{ url_for('booking', service_id=s.id) }}" class="btn">
            <i class="bi bi-calendar-check me-1"></i> จองทันที!
          </a>
        </div>
      </div>
    </div>
    {% else %}
    <div class="col-12">
      <div class="empty-state">
        <i class="bi bi-exclamation-octagon"></i>
        <h4>ขออภัย! ยังไม่มีบริการให้เลือกในขณะนี้</h4>
        <p class="text-muted">กรุณากลับมาตรวจสอบภายหลัง หรือติดต่อผู้ดูแลระบบเพื่อเพิ่มรายการบริการ</p>
      </div>
    </div>
    {% endfor %}
  </div>
</div>
{% endblock %}